<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SimuWeb - AI Website Builder</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background:#121212;
      color:#f5f5f5;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .container { max-width:1200px; width:100%; padding:20px; }

    /* AUTH */
    .auth-section, .dashboard {
      background:#1e1e1e;
      border:1px solid #333;
      border-radius:12px;
      padding:40px;
      text-align:center;
    }
    .logo { font-size:2rem; font-weight:bold; margin-bottom:10px; }
    .subtitle { color:#aaa; margin-bottom:30px; }

    .discord-btn {
      background:#5865f2;
      color:#fff;
      border:none;
      padding:12px 28px;
      border-radius:6px;
      font-size:1rem;
      font-weight:600;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .discord-btn:hover { opacity:0.9; }

    .discord-icon { width:20px; height:20px; }

    /* DASHBOARD */
    .dashboard {
      display:none;
      grid-template-columns:280px 1fr;
      gap:20px;
      margin-top:20px;
    }
    .sidebar {
      background:#1a1a1a;
      border:1px solid #333;
      border-radius:8px;
      padding:20px;
      display:flex;
      flex-direction:column;
      gap:20px;
    }
    .user-info {
      display:flex; align-items:center; gap:12px;
      border-bottom:1px solid #333; padding-bottom:15px;
    }
    .avatar {
      width:48px; height:48px; border-radius:50%;
      background:#333; background-size:cover; background-position:center;
    }
    .username { font-weight:600; }

    .projects-list { display:flex; flex-direction:column; gap:10px; }
    .project-item {
      padding:10px; border:1px solid #333; border-radius:6px;
      cursor:pointer; text-align:left;
    }
    .project-item:hover { background:#2a2a2a; }

    .main-content {
      background:#1a1a1a;
      border:1px solid #333;
      border-radius:8px;
      padding:25px;
    }
    .welcome-message { margin-bottom:20px; }
    .welcome-title { font-size:1.4rem; margin-bottom:6px; }
    .welcome-subtitle { color:#aaa; font-size:0.95rem; }

    .model-selector { margin-bottom:15px; text-align:left; }
    .model-select {
      background:#121212; color:#f5f5f5;
      border:1px solid #333; border-radius:6px;
      padding:8px 12px; width:100%;
    }

    .prompt-input {
      width:100%; min-height:100px;
      padding:10px;
      border:1px solid #333;
      border-radius:6px;
      background:#121212;
      color:#f5f5f5;
      margin-bottom:15px;
    }
    .generate-btn {
      background:#333; color:#f5f5f5;
      border:1px solid #555;
      padding:12px 20px;
      border-radius:6px;
      cursor:pointer;
      width:100%;
    }
    .generate-btn:hover { background:#444; }

    .generating { display:none; color:#aaa; font-style:italic; margin-top:10px; }
    .project-info { display:none; background:#222; padding:10px; border-radius:6px; margin:15px 0; font-size:0.9rem; }
    .project-url { color:#58a6ff; word-break:break-all; }

    .preview-section { display:none; margin-top:15px; }
    .preview-frame {
      width:100%; height:400px;
      border:1px solid #333; border-radius:6px;
      background:#fff;
    }
  </style>
</head>
<body>
<div class="container">

  <!-- AUTH -->
  <div class="auth-section" id="authSection">
    <div class="logo">SimuWeb</div>
    <div class="subtitle">AI-Powered Website Builder</div>
    <p style="margin-bottom:25px; color:#aaa;">Build websites & apps with AI â€” no coding required!</p>
    <button class="discord-btn" onclick="connectDiscord()">
      <svg class="discord-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M20.317 4.3698a19.7913..."/></svg>
      Connect with Discord
    </button>
  </div>

  <!-- DASHBOARD -->
  <div class="dashboard" id="dashboard">
    <div class="sidebar">
      <div class="user-info">
        <div class="avatar" id="userAvatar"></div>
        <div class="username" id="userName">User</div>
      </div>
      <div class="projects-list" id="projectsList">
        <div class="project-item" onclick="createNewProject()">+ New Project</div>
      </div>
    </div>

    <div class="main-content">
      <div class="welcome-message">
        <div class="welcome-title">Welcome to SimuWeb!</div>
        <div class="welcome-subtitle">Start by creating your first project</div>
      </div>

      <div class="model-selector">
        <label for="modelSelect">AI Model</label>
        <select class="model-select" id="modelSelect">
          <option value="qwen/qwen3-32b">Qwen 3 32B (Alibaba)</option>
        </select>
      </div>

      <textarea id="promptInput" class="prompt-input" placeholder="Describe your project idea..."></textarea>
      <button class="generate-btn" onclick="generateProject()">Generate</button>
      <div id="generating" class="generating">AI is crafting your site...</div>
      <div id="projectInfo" class="project-info">Project URL: <span id="projectUrl" class="project-url"></span></div>
      <div id="previewSection" class="preview-section">
        <iframe id="previewFrame" class="preview-frame"></iframe>
      </div>
    </div>
  </div>
</div>

<script>
const clientId = "1362097275811135669"; 
const redirectUri = window.location.origin; 
let userData=null, projects={}, projectCounter=1;

function connectDiscord(){
  const url = `https://discord.com/api/oauth2/authorize?client_id=${clientId}&redirect_uri=${encodeURIComponent(redirectUri)}&response_type=token&scope=identify`;
  window.location.href=url;
}

window.onload=async()=>{
  if(window.location.hash.includes("access_token")){
    const params=new URLSearchParams(window.location.hash.substring(1));
    const token=params.get("access_token");
    const res=await fetch("https://discord.com/api/users/@me",{headers:{Authorization:`Bearer ${token}`}});
    userData=await res.json();
    loginSuccess(userData);
    window.history.replaceState({},document.title,redirectUri);
  }
};

function loginSuccess(user){
  document.getElementById("authSection").style.display="none";
  document.getElementById("dashboard").style.display="grid";
  document.getElementById("userName").innerText=user.username;
  document.getElementById("userAvatar").style.backgroundImage=`url(https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png)`;
}

function createNewProject(){
  const id="proj"+projectCounter++;
  projects[id]={versions:[],current:0};
  alert("New project created! Enter a description and click Generate.");
}

function generateProject(){
  const prompt=document.getElementById("promptInput").value.trim();
  if(!prompt){alert("Please enter a description!");return;}
  document.getElementById("generating").style.display="block";

  setTimeout(()=>{
    document.getElementById("generating").style.display="none";
    const pid="proj"+(projectCounter-1);
    if(!projects[pid]){createNewProject();}
    const version=projects[pid].versions.length+1;
    const code=`<!DOCTYPE html><html><head><title>${prompt}</title></head><body style="font-family:sans-serif;text-align:center;padding:50px;"><h1>${prompt}</h1><p>Generated by SimuWeb AI</p></body></html>`;
    projects[pid].versions.push(code);
    projects[pid].current=version;
    const url=`${window.location.origin}/@${userData.username}/${pid}/${version}`;
    document.getElementById("projectInfo").style.display="block";
    document.getElementById("projectUrl").innerText=url;
    document.getElementById("previewSection").style.display="block";
    document.getElementById("previewFrame").srcdoc=code;
  },2000);
}

document.addEventListener("keydown",e=>{
  if(e.key==="F2"){document.getElementById("promptInput").focus();e.preventDefault();}
});
</script>
</body>
</html>
