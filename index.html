<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SimuWeb - AI Website Builder</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: "Inter", sans-serif;
      background:#000;
      color:#fff;
      height:100vh; display:flex; flex-direction:column;
    }

    /* Centered layout for signup */
    .centered {
      display:flex; align-items:center; justify-content:center;
      flex:1; flex-direction:column; gap:20px;
    }

    .card {
      background:#111; border:1px solid #333;
      padding:30px; border-radius:12px;
      text-align:center; width:300px;
    }
    .card h1 { font-size:1.4rem; margin-bottom:10px; }
    .card p { font-size:0.9rem; color:#aaa; margin-bottom:20px; }

    .input {
      width:100%; padding:10px;
      border:1px solid #333; border-radius:6px;
      background:#1a1a1a; color:#fff;
      margin-bottom:15px; font-size:0.95rem;
    }
    .btn {
      width:100%; padding:12px;
      border:none; border-radius:6px;
      background:#444; color:#fff;
      font-weight:600; cursor:pointer;
    }
    .btn:hover { background:#555; }

    /* Workspace */
    .workspace {
      flex:1; display:flex; align-items:center; justify-content:center;
      position:relative;
    }
    .placeholder {
      text-align:center;
      color:#666;
      font-size:1.2rem;
    }
    iframe.preview {
      width:100%; height:100%; border:none; display:none;
    }

    /* Prompt bar */
    .prompt-bar {
      position:fixed;
      bottom:25px; left:50%; transform:translateX(-50%);
      background:#111; border:1px solid #333;
      border-radius:28px;
      padding:8px 12px;
      display:flex; align-items:center;
      width:650px; max-width:90%;
      box-shadow:0 4px 20px rgba(0,0,0,0.4);
      display:none;
    }
    .prompt-input {
      flex:1; background:transparent; border:none; outline:none;
      color:#fff; font-size:1rem; padding:10px 14px;
    }
    .prompt-btn {
      background:#222; color:#fff;
      border:none; border-radius:20px;
      padding:8px 14px; cursor:pointer;
    }
    .prompt-btn:hover { background:#333; }
  </style>
</head>
<body>

<!-- Sign Up Page -->
<div id="signupPage" class="centered">
  <div class="card">
    <h1>Welcome to SimuWeb</h1>
    <p>Create your AI-powered sites for free</p>
    <input type="text" id="username" class="input" placeholder="Enter username"/>
    <button class="btn" onclick="signUp()">Sign Up</button>
  </div>
</div>

<!-- Main App -->
<div id="appPage" style="display:none;flex:1;flex-direction:column;">
  <div class="workspace">
    <div id="placeholder" class="placeholder">
      Nothing to see here yet<br>
      <small>The site will be created when you submit your prompt.</small>
    </div>
    <iframe id="previewFrame" class="preview"></iframe>
  </div>

  <div class="prompt-bar" id="promptBar">
    <input id="promptInput" class="prompt-input" placeholder="Describe your website idea..."/>
    <button id="generateBtn" class="prompt-btn" onclick="generateProject()">Generate</button>
  </div>
</div>

<script>
let user=null, projects={}, projectCounter=1;

function signUp(){
  const name=document.getElementById("username").value.trim();
  if(!name){alert("Enter a username");return;}
  user={username:name};
  alert("Signed up!");
  document.getElementById("signupPage").style.display="none";
  document.getElementById("appPage").style.display="flex";
  document.getElementById("promptBar").style.display="flex";
}

function createNewProject(){
  const id="proj"+projectCounter++;
  projects[id]={versions:[]};
  return id;
}

function generateProject(){
  const prompt=document.getElementById("promptInput").value.trim();
  if(!prompt) return;
  const btn=document.getElementById("generateBtn");
  btn.innerText="Crafting your site.."; btn.disabled=true;

  const pid=createNewProject();
  const version=1;

  // Fake AI generation (replace with Groq fetch)
  setTimeout(()=>{
    const code=`<!DOCTYPE html><html><head><title>${prompt}</title></head><body style="font-family:sans-serif;text-align:center;padding:50px;"><h1>${prompt}</h1><p>Generated by SimuWeb AI</p></body></html>`;
    projects[pid].versions.push(code);

    document.getElementById("placeholder").style.display="none";
    const frame=document.getElementById("previewFrame");
    frame.style.display="block";
    frame.srcdoc=code;

    const url=`${window.location.origin}/@${user.username}/${pid}/${version}`;
    window.history.pushState({}, "", url);

    btn.innerText="Generate"; btn.disabled=false;
  },1500);
}
</script>
</body>
</html>
